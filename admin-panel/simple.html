<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zerda Simple Admin Panel</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: #18214F; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .feature { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; }
        .toggle { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; }
        .toggle.on { background: #28a745; color: white; }
        .toggle.off { background: #dc3545; color: white; }
        .login-form { max-width: 400px; margin: 50px auto; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; }
        .form-group input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .btn { padding: 10px 20px; background: #18214F; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
        .stat { background: white; padding: 20px; border-radius: 8px; text-align: center; }
        .stat-number { font-size: 32px; font-weight: bold; color: #18214F; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const SimpleAdmin = () => {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [features, setFeatures] = useState({});
            const [stats, setStats] = useState({ totalCustomers: 0, activeFeatures: 0 });
            const [loading, setLoading] = useState(false);
            const [message, setMessage] = useState('');
            
            useEffect(() => {
                if (isLoggedIn) {
                    loadFeatures();
                    loadStats();
                }
            }, [isLoggedIn]);
            
            const login = async (e) => {
                e.preventDefault();
                const username = e.target.username.value;
                const password = e.target.password.value;
                
                setLoading(true);
                try {
                    const response = await fetch('/api/auth/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ username, password })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        localStorage.setItem('admin_token', data.data.token);
                        setIsLoggedIn(true);
                        setMessage('GiriÅŸ baÅŸarÄ±lÄ±!');
                    } else {
                        setMessage(data.error || 'GiriÅŸ baÅŸarÄ±sÄ±z');
                    }
                } catch (error) {
                    setMessage('BaÄŸlantÄ± hatasÄ±: ' + error.message);
                }
                setLoading(false);
            };
            
            const loadFeatures = async () => {
                try {
                    const response = await fetch('/api/features');
                    const data = await response.json();
                    if (data.success) {
                        setFeatures(data.features);
                    }
                } catch (error) {
                    console.error('Features yÃ¼klenemedi:', error);
                }
            };
            
            const loadStats = async () => {
                try {
                    const token = localStorage.getItem('admin_token');
                    const response = await fetch('/api/dashboard/stats', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    const data = await response.json();
                    if (data.success) {
                        setStats(data.data);
                    }
                } catch (error) {
                    console.error('Stats yÃ¼klenemedi:', error);
                }
            };
            
            const logout = () => {
                localStorage.removeItem('admin_token');
                setIsLoggedIn(false);
                setFeatures({});
            };
            
            if (!isLoggedIn) {
                return (
                    <div className="login-form">
                        <div className="card">
                            <h2>Zerda Admin Panel</h2>
                            <form onSubmit={login}>
                                <div className="form-group">
                                    <label>KullanÄ±cÄ± AdÄ±:</label>
                                    <input type="text" name="username" defaultValue="admin" required />
                                </div>
                                <div className="form-group">
                                    <label>Åžifre:</label>
                                    <input type="password" name="password" defaultValue="admin123" required />
                                </div>
                                <button type="submit" className="btn" disabled={loading}>
                                    {loading ? 'GiriÅŸ yapÄ±lÄ±yor...' : 'GiriÅŸ Yap'}
                                </button>
                            </form>
                            {message && <p style={{marginTop: '10px', color: message.includes('baÅŸarÄ±lÄ±') ? 'green' : 'red'}}>{message}</p>}
                            <div style={{marginTop: '20px', padding: '10px', background: '#f0f0f0', borderRadius: '4px'}}>
                                <strong>Test Bilgileri:</strong><br/>
                                KullanÄ±cÄ±: admin<br/>
                                Åžifre: admin123
                            </div>
                        </div>
                    </div>
                );
            }
            
            return (
                <div className="container">
                    <div className="header">
                        <h1>ðŸš€ Zerda Admin Panel</h1>
                        <p>GeliÅŸmiÅŸ Ã–zellik YÃ¶netimi v2.0</p>
                        <button onClick={logout} style={{background: '#dc3545', color: 'white', border: 'none', padding: '8px 16px', borderRadius: '4px', cursor: 'pointer'}}>
                            Ã‡Ä±kÄ±ÅŸ Yap
                        </button>
                    </div>
                    
                    <div className="stats">
                        <div className="stat">
                            <div className="stat-number">{stats.totalCustomers}</div>
                            <div>MÃ¼ÅŸteriler</div>
                        </div>
                        <div className="stat">
                            <div className="stat-number">{stats.activeFeatures}</div>
                            <div>Aktif Ã–zellikler</div>
                        </div>
                        <div className="stat">
                            <div className="stat-number">{Object.keys(features).length}</div>
                            <div>Toplam Ã–zellikler</div>
                        </div>
                    </div>
                    
                    <div className="card">
                        <h3>ðŸ“± Ã–zellik YÃ¶netimi</h3>
                        <p>AÅŸaÄŸÄ±daki Ã¶zellikler ÅŸu anda <strong>READ-ONLY</strong> modda gÃ¶rÃ¼ntÃ¼leniyor:</p>
                        {Object.entries(features).map(([name, enabled]) => (
                            <div key={name} className="feature">
                                <span><strong>{name}</strong></span>
                                <span className={`toggle ${enabled ? 'on' : 'off'}`}>
                                    {enabled ? 'AÃ‡IK' : 'KAPALI'}
                                </span>
                            </div>
                        ))}
                    </div>
                    
                    <div className="card">
                        <h3>ðŸ”Œ API Durumu</h3>
                        <p>âœ… Backend API Ã§alÄ±ÅŸÄ±yor (Port 3007)</p>
                        <p>âœ… Database baÄŸlantÄ±sÄ± aktif</p>
                        <p>âœ… Authentication sistemi Ã§alÄ±ÅŸÄ±yor</p>
                        <p>âœ… {Object.keys(features).length} Ã¶zellik yÃ¼klendi</p>
                        
                        <div style={{marginTop: '20px', padding: '15px', background: '#e8f5e8', borderRadius: '4px'}}>
                            <strong>ðŸŽ‰ Sistem BaÅŸarÄ±yla Kuruldu!</strong><br/>
                            Multi-tenant admin panel sistemimiz tam operasyonel durumda.
                        </div>
                    </div>
                    
                    <div className="card">
                        <h3>ðŸ“‹ API Test Endpoints</h3>
                        <div style={{fontFamily: 'monospace', background: '#f8f8f8', padding: '10px', borderRadius: '4px'}}>
                            <div>GET /api/health - Sistem durumu</div>
                            <div>GET /api/features - Ã–zellik listesi</div>
                            <div>POST /api/auth/login - Admin login</div>
                            <div>GET /api/customers - MÃ¼ÅŸteri listesi</div>
                            <div>GET /api/dashboard/stats - Ä°statistikler</div>
                        </div>
                    </div>
                </div>
            );
        };
        
        ReactDOM.render(<SimpleAdmin />, document.getElementById('root'));
    </script>
</body>
</html>